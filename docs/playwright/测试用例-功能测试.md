# 功能测试用例

本文档包含 biubiuAI 工作台的功能测试用例，供自动化测试和人工测试使用。

## 测试环境

- **测试地址**：根据部署环境配置
- **前置条件**：已登录账号，有基础数据

## 用例编号规则

- `TC-模块-序号`
- 模块：CHAT（对话）、STUDIO（创作）、SETTINGS（设置）、COMMON（通用）

---

## 1. 对话模块 (CHAT)

### TC-CHAT-001 助手列表显示

**前置条件**：已登录

**测试步骤**：
1. 访问 `/chat` 页面
2. 等待页面加载完成（2-3秒）
3. 查看左侧助手列表

**预期结果**：
- 显示"收藏"和"全部"两个分组
- 收藏分组显示已收藏的助手
- 全部分组显示所有助手
- 每个助手显示名称、对话数量、收藏按钮

---

### TC-CHAT-002 助手收藏/取消收藏

**前置条件**：已登录，存在未收藏的助手

**测试步骤**：
1. 在助手列表找到未收藏的助手
2. 点击收藏按钮
3. 观察助手是否移动到收藏分组
4. 再次点击取消收藏
5. 观察助手是否移回全部分组

**预期结果**：
- 收藏后助手出现在收藏分组
- 取消收藏后助手从收藏分组移除
- 操作有即时反馈

---

### TC-CHAT-003 新建助手

**前置条件**：已登录

**测试步骤**：
1. 点击"新建助手"按钮
2. 填写助手名称
3. 填写系统提示词（可选）
4. 点击保存

**预期结果**：
- 新助手出现在助手列表
- 可以选中新助手开始对话

---

### TC-CHAT-004 发送消息

**前置条件**：已登录，已选择助手和模型

**测试步骤**：
1. 在输入框输入消息"你好"
2. 按 Enter 或点击发送按钮
3. 等待响应

**预期结果**：
- 用户消息显示在对话区域
- AI 响应流式显示
- 响应完成后显示完整内容

---

### TC-CHAT-005 模型切换

**前置条件**：已登录，配置了多个对话模型

**测试步骤**：
1. 点击模型选择器
2. 选择不同的模型
3. 发送测试消息

**预期结果**：
- 模型选择器显示当前选中模型
- 切换后使用新模型响应

---

### TC-CHAT-006 对话列表管理

**前置条件**：已登录，当前助手有多个对话

**测试步骤**：
1. 查看右侧对话列表
2. 点击某个历史对话
3. 点击对话的删除按钮

**预期结果**：
- 对话列表按时间倒序显示
- 点击后加载对应对话内容
- 删除后对话从列表移除

---

### TC-CHAT-007 话题建议

**前置条件**：已登录，新对话状态

**测试步骤**：
1. 选择一个助手，进入新对话
2. 查看话题建议区域
3. 点击"换一批"按钮
4. 点击某个话题建议

**预期结果**：
- 显示多个话题建议
- 换一批后显示新的建议
- 点击建议后自动填入输入框并发送

---

## 2. 创作模块 (STUDIO)

### TC-STUDIO-001 图片生成

**前置条件**：已登录，配置了绘图模型

**测试步骤**：
1. 访问 `/studio` 页面
2. 确认在"图片"模式
3. 选择绘图模型
4. 输入提示词"一只可爱的小猫"
5. 点击"开始生成"

**预期结果**：
- 任务创建成功
- 任务列表显示新任务（进行中状态）
- 生成完成后显示图片

---

### TC-STUDIO-002 视频生成

**前置条件**：已登录，配置了视频模型

**测试步骤**：
1. 点击"视频"标签切换模式
2. 选择视频模型
3. 输入提示词
4. 点击"开始生成"

**预期结果**：
- 任务创建成功
- 任务列表显示新任务
- 生成完成后可播放视频

---

### TC-STUDIO-003 AI 优化提示词

**前置条件**：已登录，已配置优化模型

**测试步骤**：
1. 选择绘图模型
2. 输入简单提示词"猫"
3. 点击"AI 优化"按钮

**预期结果**：
- 提示词被优化为更详细的描述
- 优化后的提示词填入输入框

---

### TC-STUDIO-004 任务筛选和搜索

**前置条件**：已登录，有多个生成任务

**测试步骤**：
1. 点击工作台筛选下拉框，选择不同选项
2. 点击全部筛选下拉框，选择不同状态
3. 在搜索框输入关键词

**预期结果**：
- 筛选后只显示符合条件的任务
- 搜索后只显示包含关键词的任务

---

### TC-STUDIO-005 任务操作

**前置条件**：已登录，有已完成的图片任务

**测试步骤**：
1. 找到一个已完成的图片任务
2. 点击"下载图片"
3. 点击"放大查看"
4. 点击"复制到工作台"
5. 点击"删除"

**预期结果**：
- 下载触发文件下载
- 放大显示大图弹窗
- 复制后提示词填入工作台
- 删除后任务移入回收站

---

## 3. 设置模块 (SETTINGS)

### TC-SETTINGS-001 上游配置列表

**前置条件**：已登录

**测试步骤**：
1. 访问 `/settings/upstreams`
2. 查看上游列表

**预期结果**：
- 显示所有已配置的上游
- 每个上游显示名称、地址、模型数量
- 显示平台类型（如 OneAPI）

---

### TC-SETTINGS-002 添加上游

**前置条件**：已登录

**测试步骤**：
1. 点击"添加"按钮
2. 填写上游名称
3. 填写 API 地址
4. 填写 API Key
5. 保存

**预期结果**：
- 新上游出现在列表中
- 可以为新上游添加模型

---

### TC-SETTINGS-003 模型可用性测试

**前置条件**：已登录，有配置的对话模型

**测试步骤**：
1. 访问 `/settings/model-test`
2. 选择模型分类"对话"
3. 设置并发数为 3
4. 点击"开始测试"

**预期结果**：
- 测试开始，显示进度
- 每个模型显示测试状态
- 测试完成后显示成功/失败数量
- 结果保存到历史记录

---

### TC-SETTINGS-004 MCP 服务管理

**前置条件**：已登录

**测试步骤**：
1. 访问 `/settings/mcp`
2. 查看 MCP 服务列表
3. 点击某个服务的开关切换启用状态
4. 点击"展开工具列表"查看工具

**预期结果**：
- 显示所有配置的 MCP 服务
- 开关可以启用/禁用服务
- 展开后显示服务提供的工具列表

---

### TC-SETTINGS-005 导入导出

**前置条件**：已登录，有助手和上游数据

**测试步骤**：
1. 访问 `/settings/export`
2. 勾选要导出的助手
3. 勾选要导出的上游
4. 点击"导出选中"

**预期结果**：
- 下载 JSON 格式的导出文件
- 文件包含选中的助手和上游配置

---

## 4. 通用模块 (COMMON)

### TC-COMMON-001 主题切换

**前置条件**：已登录

**测试步骤**：
1. 点击顶部导航栏的主题切换按钮
2. 观察页面颜色变化

**预期结果**：
- 深色/浅色模式切换
- 所有页面元素颜色正确变化

---

### TC-COMMON-002 回收站恢复

**前置条件**：已登录，回收站有已删除任务

**测试步骤**：
1. 访问 `/trash`
2. 找到要恢复的任务
3. 点击"恢复"按钮

**预期结果**：
- 任务从回收站移除
- 任务恢复到创作工作台

---

### TC-COMMON-003 导航功能

**前置条件**：已登录

**测试步骤**：
1. 依次点击顶部导航：创作、对话、文档、设置
2. 观察页面跳转

**预期结果**：
- 每个链接正确跳转到对应页面
- 当前页面导航项高亮显示

---

## 5. 测试优先级

| 优先级 | 用例 | 说明 |
|--------|------|------|
| P0 | TC-CHAT-004, TC-STUDIO-001 | 核心功能 |
| P1 | TC-CHAT-001~003, TC-STUDIO-002~005 | 主要功能 |
| P2 | TC-SETTINGS-001~005 | 配置功能 |
| P3 | TC-COMMON-001~003 | 辅助功能 |

---

## 6. 自动化测试注意事项

1. **等待页面渲染**：每次导航或点击后等待 2-3 秒
2. **元素定位**：优先使用语义化选择器（role、label）
3. **断言时机**：等待目标元素出现后再断言
4. **数据清理**：测试后清理创建的测试数据
