# 搜索功能介绍

搜索功能让 AI 能够访问互联网获取最新信息，回答时效性问题或查找实时数据。

## 模型原生搜索

模型原生搜索通过各厂商提供的 Server Tool 实现，由模型自主决定何时发起搜索。

### 开启搜索

在「上游配置」中编辑模型时，勾选「联网」能力即可启用搜索功能。

系统会根据模型名称自动推断默认能力值，支持的模型会自动勾选联网能力。如需手动调整，可在模型编辑界面修改。

> **注意**：
> - 模型能力需要保存后才会生效。
> - 原生搜索能力依赖上游 API 的支持。中转站（特别是逆向渠道）可能未完整实现该功能——模型可能实际执行了搜索，但搜索记录详情未透传到下游，导致无法渲染搜索结果。此时信息准确度需自行判断。

### Claude 系列

已实现。通过 `web_search_20250305` Server Tool 调用。

请求参数：
```json
{
  "tools": [{
    "type": "web_search_20250305",
    "name": "web_search",
    "max_uses": 5
  }]
}
```

支持的模型：claude-3-5-sonnet、claude-3-7-sonnet、claude-sonnet-4、claude-opus-4 等。

### OpenAI 系列

已实现。通过 `web_search_options` 参数启用，搜索引用通过 `annotations` 字段返回。

请求参数：
```json
{
  "web_search_options": {
    "search_context_size": "medium"
  }
}
```

支持的模型：gpt-4o-search-preview、gpt-4.1、o3、o4 等。

### Gemini 系列

已实现。通过 `googleSearch` 工具启用，搜索结果通过 `groundingMetadata` 返回。

请求参数：
```json
{
  "tools": [{ "googleSearch": {} }]
}
```

支持的模型：gemini-2.0-flash、gemini-2.5-pro、gemini-2.5-flash、gemini-3 系列等。

## MCP 搜索

待实现。通过 MCP 协议调用外部搜索服务。

## 相关文档

- [上游和模型配置](./上游和模型配置.md)
- [MCP 接口功能介绍](./MCP接口功能介绍.md)
